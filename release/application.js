(function(){window.luma=window.luma||{};(function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;S=void 0;r=S/2;G=S/2;l=b.scale.linear().range([0,2*Math.PI]);F=b.scale.pow().exponent(1.3).domain([0,1]).range([0,G]);C=void 0;f=void 0;i=void 0;j=void 0;D=void 0;g=void 0;p=void 0;B=void 0;E=void 0;J=void 0;L=void 0;a.init=function(a,c,d,e,h){if(c==null)c=840;if(d==null)d=1000;if(e==null)e=5;if(a==null)a='#vis';if(h==null)h="wheel.json";S=c;f=d;C=e;p=h;i=b.select(a);a.select('img').remove();j=w();t();D=u();g=s();return b.json(p,z);};w=function(){return i.append("svg").attr("width",S+C*2).attr("height",r+C*2).append("g").attr("transform","translate("+(G+C)+","+(G+C)+")");};t=function(){return i.append("p").attr("id","intro").attr("Click to zoom!");};u=function(){return b.layout.partition().sort(null).value(q);};q=function(a){return 5.8-a.depth;};s=function(){return b.svg.arc().startAngle(e).endAngle(d).innerRadius(H).outerRadius(I);};e=function(a){return Math.max(0,Math.min(2*Math.PI,x(a.x)));};d=function(a){return Math.max(0,Math.min(2*Math.PI,x(a.x+a.dx)));};H=function(a){return Math.max(0,a.y?y(a.y):a.y);};I=function(a){return Math.max(0,y(a.y+a.dy));};o=function(){v();return x();};v=function(){E=j.selectAll("path").data(B);return E.enter().append('path').attr("id",function(a,b){return "path-"+b;}).attr("d",g).attr("fill-rule","evenodd").style("fill",n).on("click",m);};x=function(){J=j.selectAll("text").data(B);L=J.enter().append('text').style('fill',M).attr('text-anchor',K).attr('dy','.2em').attr('transform',O).on('click',m);L.append('tspan').attr('x',0).text(Q);return L.append('tspan').attr('x',0).attr('dy','1em').text(text_two_handler);};Q=function(a){if(a.depth)return a.name.split(' ')[0];else return '';};R=function(a){if(a.depth)return a.name.split(' ')[1]||'';else return '';};M=function(a){if(k(b.rgb(n(a)))<125)return '#eee';else return '#000';};K=function(a){if(x(a.x+a.dx/2)>Math.PI)return 'end';else return 'start';};O=function(a){var b,c,d;c=(a.name||'').split(' ').length>1;b=x(a.x+a.dx/2)*180/Math.PI-90;d=b+(c?-0.5:0);return "rotate("+d+")translate("+(y(a.y)+p)+")rotate("+(b>90?-180:0)+")";};z=function(a){B=D.nodes({children:a});return o();};m=function(a){E.transition().duration(duration).attrTween('d',h(a));if(!y(a,e))return J.style('visibility',function(a){return b.select(this).style('visibility');}).transition().duraction(duration).attrTween('text-anchor',N).attrTween('transform',P).style('fill-opacity',function(b){var c;return(c=y(a,b))!=null?c:{1:1e-6};}).each('end',function(c){return b.select(this).style('visibility',y(a,c)?null:'hidden');});};N=function(a){return function(){var b;return(x(a.x+a.dx/2)>(b=Math.PI)&&b>{'end':'start'});};};P=function(a){var b;b=(a.name||'').split(' ').length>1;return function(){var b,c;b=x(a.x+a.dx/2)*180/Math.PI-90;c=b+(multline?-0.5:0);return "rotate("+c+")translate("+(y(a.y)+C)+")rotate("+(b>90?-180:0)+")";};};y=function(a,b){if(a===b)return true;else if(a.children)return a.children.some(function(a){return y(a,b);});else return false;};n=function(a){var c,d,e;if(a.children){e=a.children.map(n);c=b.hsl(e[0]);d=b.hsl(e[1]);return b.hsl((c.h+d.h)/2,c.s*1.2,c.l/1.2);}else return a.colour||'#fff';};h=function(a){var c,d,e,f;c=A(a);d=b.interpolate(x.domain(),[a.x,a.x+a.dx]);e=b.interpolate(y.domain(),[a.y,c]);return f=b.interpolate(y.range(),[(a.y?20:0),G]);};A=function(a){if(a.children)return Math.max.apply(Math,a.children.map(A));else return a.y+a.dy;};return k=function(a){return a.r*.299+a.g*.587+a.b*.114;};})(window.luma.taste_mapper=window.luma.taste_mapper||{},d3,jQuery);$(function(){return window.luma.taste_mapper.init('div_selector',840,1000,5,'wheel.json');});}).call(this);